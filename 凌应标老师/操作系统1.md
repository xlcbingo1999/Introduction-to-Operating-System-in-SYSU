# 操作系统01笔记

> 凌应标老师</br>
> 如何学习？由于腾讯课堂授课有录播，观看回播的方式我个人觉得挺好</br>
> Update: 2020/04/21 09:59

## 2.1 操作系统的目标与功能

* 操作系统是机器与应用程序之间的接口程序，其主要功能是动态分配系统的共享资源给正在执行的程序。包括管理和调度内存、进程和其他设备。
* OS是在硬件基础上的第一层软件
  * 控制应用程序的执行
  * 充当应用程序和硬件的接口
* OS的设计目标
  * 方便(convenience)——使得计算机易于使用
  * 有效(efficiency)——以有效的方式使用计算机系统的资源
  * 易扩展(evolution)——可引入新的系统功能

![J3yitA.png](https://s1.ax1x.com/2020/04/21/J3yitA.png)

### 2.1.1 作为用户/计算机接口

屏蔽用户细节

#### 2.1.1.1 计算机系统的3个关键界面/接口

* ISA(指令集体系结构)
  * 定义计算机可遵循的机器语言指令系统
  * 软硬件的分界接口
  * 应用程序和实用工具都可以直接访问ISA的子集——用户ISA
  * 操作系统有权访问另外的管理系统资源的机器语言指令——系统ISA

* ABI(应用程序二进制接口)
  * 定义二进制可移植交叉程序的标准
  * 定义对操作系统与硬件资源的系统调用

* API(应用编程接口)
  * 让程序可以通过增补的HLL(高级语言)库调用来访问硬件资源和经由用户ISA提供的可用系统服务
  * 任何系统调用通常都是通过库来完成的
  * 利用API，应用软件可以很容易地（通过重新编译）移植到支持同样API的其他系统

### 2.1.2 作为资源管理器

* 计算机就是一组资源，用于数据的传送、存储和处理，以及对这些功能的控制
* OS负责管理计算机的软硬件资源
* OS通过管理计算机资源来控制计算机的基本功能【效率更高】
* OS和其他控制机制的不同：
  * （作为控制器的）操作系统与（被控制的）普通软件的作用相同，都是由处理器执行的一组程序

![J3U27t.png](https://s1.ax1x.com/2020/04/21/J3U27t.png)

看图中

### 2.1.3 操作系统的易扩展性

* 一个重要的操作系统应该不断发展
  * 硬件升级和新型硬件的出现——新型处理器（支持分页、APU）、新的I/O设备（如触摸屏）
  * 新的服务——适应用户和系统管理员的需要（图形界面、多点触控）
  * 修正错误——修正OS的bug

* 设计要求——模块化结构、接口定义、说明文档

### 2.1.4 操作系统的定义【名词解释】

* OS是一组程序的集合，功能为:
  * 控制和管理计算机硬件和软件资源
  * 合理地对各类作业(job，单一程序)进行调度
  * 方便用户使用计算机系统

## 2.2 操作系统的发展历史

* 串行处理
* 简单批处理
* 多道程序批处理
* 分时系统
* 实时系统
* .....(从这之后操作系统已经相对稳定了)

### 2.2.1 串行处理(Serial Processing)

* 早期计算机没有操作系统【70年代国产计算机】
* 存在两个主要问题：
  * 人工调度
  * 准备时间长
* 串行处理——用户必须顺序访问计算机的操作模式

串行实验的历史文章
[彭民德：《电子计算60年》（7）DJS 21机的结构和用机环境](https://www.ituring.com.cn/article/216578)

提高串行处理效率的方法:开发出用作公用软件的各种系统软件工具:

* 函数库
* 链接器
* 加载器
* 调试器
* I/O驱动系统
* .....

### 2.2.2 简单批处理系统(Simple Batch Systems)

* 提高利用率——自动作业序列
* 作业控制语言(JCL job control language)
* 监控程序(Monitor)——批处理操作系统
* 第一个监控程序——1950's [GE(美国通用电气公司)](https://en.wikipedia.org/wiki/General_Electric)为[IBM701](https://en.wikipedia.org/wiki/IBM_701)开发
* 监控程序所需要的硬件支持
  * 内存保护(保护监控程序)
  * 计时器()
  * 特权指令()
  * 中断()
* 操作模式()
  * 用户态——
  * 内核态——


![J3wV6e.png](https://s1.ax1x.com/2020/04/21/J3wV6e.png)

![J3wyX4.png](https://s1.ax1x.com/2020/04/21/J3wyX4.png)

* 单道程序(uniprogramming)批处理
  * 处理器必须等到I/O操作结束后才可以继续
  * 如下图，CPU会产生大量的等待，浪费了很多CPU时间

![J3wx9f.png](https://s1.ax1x.com/2020/04/21/J3wx9f.png)

### 2.2.3 多道程序批处理系统(Multiprogrammed Batch Systems)

* 动机：I/O速度太慢，需进一步提高CPU利用率
* 多道程序设计/多任务处理——1950's为IBM 360/7094开发
  * 多个作业同时进入内存
  * 切换运行

![J30DUI.png](https://s1.ax1x.com/2020/04/21/J30DUI.png)

中间的7094是中央主机:性能比较高。其中CPU对于多个批进行分时的处理。

旁边的1401是卫星机:性能比较低。

每个人的程序就是一张卡片，上面会进行穿孔，一排孔就是一个字符，一个卡片可以穿80个字符。卡片插到Card reader中，输入到Tape drive。"批"的概念就是插入一批卡片。

输入卡片后，拆下来放入Input tape中，一个一个输入到主机计算，写回到Output tape中。

Output tape中的磁带拆下来放到卫星机的Printer中，进行输出。

这是一个[脱机批处理操作](https://baike.baidu.com/item/%E8%84%B1%E6%9C%BA%E6%89%B9%E5%A4%84%E7%90%86%E7%B3%BB%E7%BB%9F)，如果三个机用线连起来，就是[联机批处理操作](https://baike.baidu.com/item/%E8%81%94%E6%9C%BA%E6%89%B9%E5%A4%84%E7%90%86%E7%B3%BB%E7%BB%9F)。

![J3BMz8.png](https://s1.ax1x.com/2020/04/21/J3BMz8.png)

* 需要的硬件功能
  * I/O中断
  * DMA
* 需要的软件功能
  * 内存管理
  * 作业调度

### 2.2.4 分时系统(Time-sharing Systems)

* 动机：满足用户与计算机的交互需要，减小响应时间(上面的脱机批处理操作在运算的时候是不能够进行中途的交互的，计算机的响应不能告诉用户，用户不能进行及时的修改)
* 响应时间：用户发出请求到用户得到结果所需要的时间。

end
